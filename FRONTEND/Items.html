<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piratas del cine</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="Home">
    <header class="cabezal">
        <section>
            <div class="presentacion">
                <img src="./imagenes/cine.png" alt="imagen" width="200px">
                <h1 id="titulo">Piratas del cine</h1>                
            </div>

            <div class ="ingresar" id="ingresar">
                <a href="inicio_registro.html" class="boton">Iniciar Sesion</a>
            </div>
            
            <nav id="navegador_interno">
                <div class="icono_menu" onclick="desplegar()">☰</div>
                <div class="cuadro_interno" id="cuadro_interno">
                    <ul>
                        <li><a href="">Perfil</a></li>
                        <li>
                            <button class="biblio" onclick="desplega_biblio()">Mi Biblioteca  <strong id="signo">&lt</strong></button>
                            <ul id="menu" hidden>
                                <li><a href="">Mis Series</a></li>
                                <li><a href="">MIs Peliculas</a></li>
                            </ul>
                        </li>
    
                        <li><a href="">Comentarios</a></li>
                        <li><button onclick="cerrarSesion()">Cerrar Sesion</button></li>
                    </ul>
                </div>

            </nav> 
        </section>    
        <section>
            <nav class="navegador">
                <div class="paginas">
                <a href="index.html">Home</a>
                <a href="Series.html">Series</a>
                <a href="Peliculas.html">Peliculas</a>
                </div>

                <div id="buscador">
                    <input type="text" id="search" placeholder="Buscar una película o serie">
                    <span id="buscar">&#128269</span>
                </div>
            </nav>

        </section>
  
    </header>
	<main>
        <div class="cuadro resultados" id="cuadro">
            <h2 id="titulo_item"></h2>
            <section id="contenido_item">
                <div id="item_informacion">
                </div>
            </section>
        </div>
	</main>
    <footer class="footer">
        <div class="content has-text-centered">
            <p>&copy; 2024 The Ethical Pirates</p>
        </div>
    </footer>
    <script src="../BACKEND/app.js"></script>
    <script src="./js/interacciones.js"></script>
    <script src="./js/series_peliculas.js"></script>
    <script>
        const parametro = new URLSearchParams(window.location.search);
        const nombre = parametro.get('nombre');
        // codificacion por los espacios en el nombre
        const nombreCodificado = encodeURIComponent(nombre);
        fetch("http://localhost:3001/api/v1/Peliculas/" + nombreCodificado)
        .then(res => res.json())
        .then(dato =>{
            const cuadro = document.getElementById('contenido_item');
            const contenedor = document.getElementById('item_informacion');
            const imagen= document.createElement('img');
            imagen.style.maxWidth="350px";
            const datos_serie= document.createElement('div');
            datos_serie.classList.add('datos_items');
            const titulo= document.getElementById('titulo_item');
            const calificacion = document.createElement('p');
            const estreno = document.createElement('p');
            const recomendado_para= document.createElement('p');
            const duracion = document.createElement('p');
            const generos = document.createElement('p');
            const idioma = document.createElement('p');
            const plataforma = document.createElement('p');
			const cuadro_sinopsis =document.createElement('div');
			
            //compretando con informacion
            imagen.src= dato.URL_POSTER;
            titulo.innerText=dato.NOMBRE_COMPLETO;
            calificacion.innerText= `Calificacion: ${dato.CALIFICACION}`;
            estreno.innerText=`Fecha de estreno: ${dato.FECHA_ESTRENO=='undefine'? dato.FECHA_ESTRENO: "xx-xx-xxxx"}`;
            recomendado_para.innerText=`Apto para ${dato.EDAD_RECOMENDADA=='undefine'? dato.EDAD_RECOMENDADA : " todo publico"}`;
            duracion.innerText= `Cantidad de Temporadas: ${dato.TOTAL_DURACION=='undefine'? dato.TOTAL_DURACION: "sin dato"}`;
            generos.innerHTML=`Genero: ${dato.GENERO}`;
            idioma.innerHTML=`Idioma original: ${dato.IDIOMA_ORIGINAL}`;
            plataforma.innerHTML=`Plataforma: ${dato.PLATAFORMA=='undefine'? dato.PLATAFORMA: "sin dato"}`;

            cuadro_sinopsis.innerHTML=`<h3>Descripcion</h3>
                <p>${dato.SINOPSIS}</p>`

            //insertandolos
			
            datos_serie.appendChild(calificacion);
            datos_serie.appendChild(estreno);
            datos_serie.appendChild(recomendado_para);
            datos_serie.appendChild(duracion);
            datos_serie.appendChild(generos);
            datos_serie.appendChild(idioma);
            datos_serie.appendChild(plataforma);

            contenedor.appendChild(imagen);
            contenedor.appendChild(datos_serie);
            
            cuadro.appendChild(contenedor);
            cuadro.appendChild(cuadro_sinopsis);

        })
        fetch("http://localhost:3001/api/v1/Series/" + nombreCodificado)
        .then(res => res.json())
        .then(dato =>{
            //creando elementos
            const cuadro = document.getElementById('contenido_item');
            const contenedor = document.getElementById('item_informacion');
            const imagen= document.createElement('img');
            imagen.style.maxWidth="350px";
            const datos_serie= document.createElement('div');
            datos_serie.classList.add('datos_items');
            const titulo= document.getElementById('titulo_item');
            const calificacion = document.createElement('p');
            const estreno = document.createElement('p');
            const recomendado_para= document.createElement('p');
            const temporadas = document.createElement('p');
            const generos = document.createElement('p');
            const idioma = document.createElement('p');
            const plataforma = document.createElement('p');
			const cuadro_sinopsis =document.createElement('div');
			
            //compretando con informacion
            imagen.src= dato.URL_POSTER;
            titulo.innerText=dato.NOMBRE_COMPLETO;
            calificacion.innerText= `Calificacion: ${dato.CALIFICACION}`;
            estreno.innerText=`Fecha de estreno: ${dato.FECHA_ESTRENO=='undefine'? dato.FECHA_ESTRENO: "xx-xx-xxxx"}`;
            recomendado_para.innerText=`Apto para ${dato.EDAD_RECOMENDADA=='undefine'? dato.EDAD_RECOMENDADA : " todo publico"}`;
            temporadas.innerText= `Cantidad de Temporadas: ${dato.TOTAL_TEMPORADAS=='undefine'? dato.TOTAL_TEMPORADAS: "sin dato"}`;
            generos.innerHTML=`Genero: ${dato.GENERO}`;
            idioma.innerHTML=`Idioma original: ${dato.IDIOMA_ORIGINAL}`;
            plataforma.innerHTML=`Plataforma: ${dato.PLATAFORMA=='undefine'? dato.PLATAFORMA: "sin dato"}`;

            cuadro_sinopsis.innerHTML=`<h3>Descripcion</h3>
                <p>${dato.SINOPSIS}</p>`

            //insertandolos
			
            datos_serie.appendChild(calificacion);
            datos_serie.appendChild(estreno);
            datos_serie.appendChild(recomendado_para);
            datos_serie.appendChild(temporadas);
            datos_serie.appendChild(generos);
            datos_serie.appendChild(idioma);
            datos_serie.appendChild(plataforma);

            contenedor.appendChild(imagen);
            contenedor.appendChild(datos_serie);
            
            cuadro.appendChild(contenedor);
            cuadro.appendChild(cuadro_sinopsis);
        })
    </script>
</body>
</html>